<link rel="stylesheet" href="https://unpkg.com/flickity@2/dist/flickity.min.css">
<script src="https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js"></script>

<link rel="stylesheet" href="https://unpkg.com/flickity-fade@1/flickity-fade.css">
<script src="https://unpkg.com/flickity-fade@1/flickity-fade.js"></script>

<link rel="stylesheet" type="text/css" href="{{asset "css/slider-component.css"}}" />

<section class="events-section">
    <slider-component id="slider" class="events-slider">
        <div class="slider-navigation wide-container">
            <div class="slide-number">
                <div class="current-slide-number-inner">
                    <span class="medium-text bigger-font">
                        0
                    </span>
                    {{#foreach pages}}
                        <span class="medium-text bigger-font">
                            {{@number}}
                        </span>
                    {{/foreach}}
                </div>
            </div>
            <div class="slider-navigation-separator">
                <div class="medium-text">
                    /
                </div>
            </div>
            <div class="slider-navigation-total-slides">
                <div class="medium-text bigger-font">
                    0{{pages.length}}
                </div>
            </div>
        </div>

        <button
            type="button"
            class="unstyled-button slider-button flex-center"
            name="previous"
            aria-label="Previous slide"
            aria-controls="slider"
        >
            <div class="slider-arrow-inner rotated flex-center">
                {{> "icons/carret-icon"}}
            </div>
        </button>

        <button
            type="button"
            class="unstyled-button slider-button flex-center"
            name="next"
            aria-label="Next slide"
            aria-controls="slider"
        >
            <div class="slider-arrow-inner flex-center">
                {{> "icons/carret-icon"}}
            </div>
        </button>

        <div class="slider-wrapper">
            {{#foreach pages}}
                <div
                    class="slide{{#has tag="#index"}} index-slide{{/has}} background-media"
                    role="group"
                    aria-roledescription="Slide"
                    aria-label="{{@number}} of {{pages.length}}"
                    data-slide-number="{{@number}}"
                    data-slug="{{slug}}"
                >
                    <div class="wide-container{{#match @custom.content_position_on_background_media "Center"}} hero-center{{/match}}">
                        <div class="hero-content">
                            <div class="hero-content-inner">
                                <div class="hero-text-content">
                                    {{#has tag="#index"}}
                                        {{! This is the index slide - show list of all events }}
                                        <div class="tags-wrapper slide-ease-in-animation">
                                            <!-- Empty tags wrapper for consistent spacing -->
                                        </div>
                                        <div class="heading-1-wrapper slide-ease-in-animation" data-content-length="{{@custom.content_length_on_background_media}}">
                                            <h1>{{title}}</h1>
                                        </div>
                                        <div class="post-summary-wrapper slide-ease-in-animation">
                                            {{>"components/index-slide-list" allPages=../pages}}
                                        </div>
                                    {{else}}
                                        {{! This is a regular event slide }}
                                        <div class="tags-wrapper slide-ease-in-animation">
                                            {{#unless access}}
                                                <div class="flex-center">
                                                    <div class="medium-text left-bracket">{{t "["}}</div>
                                                    <span class="restricted-access-icon flex-center overlay-text-color">
                                                        {{> "icons/lock-icon"}}
                                                    </span>
                                                    <div class="medium-text right-bracket">{{t "]"}}</div>
                                                </div>
                                            {{/unless}}
                                            {{#foreach tags limit="2"}}
                                                <a href="{{url}}" class="bracket-button">
                                                    <div class="medium-text left-bracket">{{t "["}}</div>
                                                    <div class="bracket-button-text">
                                                        <div class="medium-text main">{{name}}</div>
                                                        <div class="medium-text absolute">{{name}}</div>
                                                    </div>
                                                    <div class="medium-text right-bracket">{{t "]"}}</div>
                                                </a>
                                            {{/foreach}}
                                        </div>
                                        <a href="{{url}}" class="heading-1-wrapper slide-ease-in-animation" data-content-length="{{@custom.content_length_on_background_media}}">
                                            <h1>{{title}}</h1>
                                        </a>

                                        <div class="post-summary-wrapper slide-ease-in-animation">
                                            <p class="paragraph overlay">{{excerpt}}</p>
                                        </div>
                                    {{/has}}
                                </div>
                                {{#has tag="#index"}}
                                    {{! No button on index slide }}
                                {{else}}
                                    {{^match @custom.button_style_on_background_media "None"}}
                                        {{>"components/button" is_for_slider=true}}
                                    {{/match}}
                                {{/has}}
                            </div>
                        </div>
                    </div>

                    <div class="background-image slide-image-animation">
                        {{#if feature_image}} 
                            <figure class="parallax-image">
                                <img                  
                                    srcset="{{img_url feature_image size="s" format="webp"}} 320w,
                                        {{img_url feature_image size="xm" format="webp"}} 440w,
                                        {{img_url feature_image size="m" format="webp"}} 720w,
                                        {{img_url feature_image size="l" format="webp"}} 960w,
                                        {{img_url feature_image size="xl" format="webp"}} 1200w,
                                        {{img_url feature_image size="xxl" format="webp"}} 2000w,
                                        {{img_url feature_image size="2k" format="webp"}} 2560w,
                                        {{img_url feature_image size="4k" format="webp"}} 3840w"
                                    src="{{img_url feature_image size="xxl"}}"
                                    alt="{{#if feature_image_alt}}{{feature_image_alt}}{{else}}{{title}}{{/if}}"
                                >              
                            </figure>
                        {{else}}
                            <div class="placeholder flex-center">
                                {{> "icons/placeholder-icon" }}
                            </div> 
                        {{/if}}
                        <div class="dark-overlay"></div>
                    </div>
                </div>
            {{/foreach}}
        </div>
    </slider-component>
</section>