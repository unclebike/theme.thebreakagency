{{!< default}}

{{#post}}
    <main data-accent-navigation="{{#unless feature_image}}true{{else}}{{#match @custom.post_header_type "Background Media"}}false{{else match @custom.post_header_type "Background Media Centered"}}false{{else}}true{{/match}}{{/unless}}">
        <link rel="stylesheet" type="text/css" href="{{asset "css/post-content.css"}}" />
        <link rel="stylesheet" type="text/css" href="{{asset "css/post.css"}}" />
        <link rel="stylesheet" type="text/css" href="{{asset "css/order-form.css"}}" />

        <article class="article" data-is-post="false" data-post-header-type="{{@custom.post_header_type}}" data-has-featured-image="{{#if feature_image}}true{{else}}false{{/if}}"
        data-right-aligned-template="false" data-has-video="false" data-has-header="{{#match @page.show_title_and_feature_image}}true{{else}}false{{/match}}" data-has-access="{{#if access}}true{{else}}false{{/if}}">
            {{#match @page.show_title_and_feature_image}}
                {{#if feature_image}}
                    {{#match @custom.post_header_type "Background Media"}}
                        {{>"components/background-media-post-header"}}
                    {{else match @custom.post_header_type "Background Media Centered"}}
                        {{>"components/background-media-post-header"}}
                    {{else}}
                        {{>"components/default-post-header"}}
                    {{/match}}
                {{else}}
                    {{>"components/default-post-header"}}
                {{/if}}
            {{/match}}

            <div class="post-content wide-container{{#if @custom.use_page_load_animations}} hidden-post-content{{/if}}">
                <div class="post-content-inner-wrapper">
                    <div class="post-content-inner">
                        {{!-- Show contact/signup form --}}
                        {{#if access}}
                        {{!-- Full access: show complete order form --}}
                        <form 
                            class="order-form"
                            action="https://thebreaksales.ca/api/order"
                            method="POST"
                            {{#if @member}}
                            data-member-uuid="{{@member.uuid}}"
                            data-member-email="{{@member.email}}"
                            data-member-name="{{@member.name}}"
                            {{/if}}
                            data-page-slug="{{slug}}"
                        >
                            <div class="order-form-customer-info">
                                {{#if @member}}
                                <h3 class="order-form-section-title">Your Information</h3>
                                <div class="order-form-fields">
                                    <div class="order-form-field order-form-field-half">
                                        <label for="order-name">Name <span class="required">*</span></label>
                                        <input type="text" id="order-name" name="name" required placeholder="Your full name">
                                    </div>
                                    <div class="order-form-field order-form-field-half">
                                        <label for="order-email">Email <span class="required">*</span></label>
                                        <input type="email" id="order-email" name="email" required placeholder="your@email.com">
                                    </div>
                                    <div class="order-form-field order-form-field-half">
                                        <label for="order-phone">Phone</label>
                                        <input type="tel" id="order-phone" name="phone" placeholder="(555) 123-4567">
                                    </div>
                                    <div class="order-form-field order-form-field-half">
                                        <label for="order-address">Address</label>
                                        <input type="text" id="order-address" name="address" placeholder="Street address">
                                    </div>
                                    <div class="order-form-field order-form-field-third">
                                        <label for="order-city">City</label>
                                        <input type="text" id="order-city" name="city" placeholder="City">
                                    </div>
                                    <div class="order-form-field order-form-field-third">
                                        <label for="order-province">Province</label>
                                        <input type="text" id="order-province" name="province" placeholder="Province">
                                    </div>
                                    <div class="order-form-field order-form-field-third">
                                        <label for="order-postal">Postal Code</label>
                                        <input type="text" id="order-postal" name="postal_code" placeholder="A1A 1A1">
                                    </div>
                                    <div class="order-form-field order-form-field-full">
                                        <label for="order-notes">Order Notes</label>
                                        <textarea id="order-notes" name="notes" rows="3" placeholder="Any special requests or notes..."></textarea>
                                    </div>
                                </div>
                                {{else}}
                                <h3 class="order-form-section-title">Sign Up to Order</h3>
                                <p class="order-form-signup-message">Create a free account to save your selections and place orders.</p>
                                <div class="order-form-fields">
                                    <div class="order-form-field order-form-field-half">
                                        <label for="order-name">Name <span class="required">*</span></label>
                                        <input type="text" id="order-name" name="name" required placeholder="Your full name">
                                    </div>
                                    <div class="order-form-field order-form-field-half">
                                        <label for="order-email">Email <span class="required">*</span></label>
                                        <input type="email" id="order-email" name="email" required placeholder="your@email.com">
                                    </div>
                                    <div class="order-form-field order-form-field-full order-form-btn-row">
                                        <button type="button" class="order-form-signup-btn">Sign Up</button>
                                        <button type="button" class="order-form-login-btn" style="display: none;">Login as Purchaser</button>
                                    </div>
                                </div>
                                {{/if}}
                            </div>
                            <h3 class="order-form-section-title order-form-products-title">Select Products</h3>
                            {{content}}
                        </form>
                        {{else}}
                        {{!-- No access: show preview products with signup CTA in grid --}}
                        <div class="order-form-no-access">
                            <h3 class="order-form-section-title order-form-products-title">Preview Products</h3>
                            <div class="order-form-preview">
                                {{content}}
                                {{!-- Signup CTA card styled as horizontal grid item --}}
                                <div class="order-form-preview-cta">
                                    <h3 class="order-form-section-title">Register or Login to View Catalog</h3>
                                    <p class="order-form-signup-message">We just need to make sure you get access to the right catalog. Please confirm your identity to continue.</p>
                                    <div class="order-form-fields">
                                        <div class="order-form-field order-form-field-half">
                                            <label for="order-email">Email <span class="required">*</span></label>
                                            <input type="email" id="order-email" name="email" required placeholder="your@email.com">
                                        </div>
                                        <div class="order-form-field order-form-field-half">
                                            <label for="order-name">Name <span class="new-user-label">(new users)</span></label>
                                            <input type="text" id="order-name" name="name" placeholder="Your full name">
                                        </div>
                                        <div class="order-form-field order-form-field-full order-form-btn-row">
                                            <button type="button" class="order-form-login-btn">Login</button>
                                            <button type="button" class="order-form-signup-btn" style="display: none;">Sign Up</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {{/if}}
                    </div>
                </div>
            </div>
        </article>

        <script>
            applyImageGridPattern();
            applyImageCalloutGridPattern();
        </script>
        <script src="{{asset "js/post-content.js"}}"></script>
        <script src="{{asset "js/order-form.js"}}"></script>
    </main>
{{/post}}

{{#match @custom.footer_type "Creative"}}
    {{> "components/footer-creative"}}
{{else}}
    {{> "components/footer-normal"}}
{{/match}}
